---
import AddBlog from "@components/forms/AddBlog.vue";
import LayoutPanel from "@layouts/LayoutPanel.astro";
import { validatePerm, permType } from "@assets/auth/validatePerm";
const { user } = Astro.locals;

const isInvalid = await validatePerm(user?.idRol, permType.w, "blogs");

if (isInvalid) {
  return Astro.redirect("/404");
}
---

<LayoutPanel sectionTitle="AÃ±adir blog">
  <AddBlog idUsuario={user?.id} client:idle />
</LayoutPanel>
