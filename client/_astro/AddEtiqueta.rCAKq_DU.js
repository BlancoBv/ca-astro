import{d as x,c as y,k as q,o as f,p as u,m as c,w,g as C,P as E,a as _,l as p,t as m,n as S,b as k,j as M,x as U,f as P,F as Y,i as V}from"./index.BA0kIsUy.js";import{I as F}from"./Input.wFcuhFwY.js";import{a as A,u as v}from"./http.BXiFSbaU.js";import{a as B,b as I}from"./index.BsO8iHDm.js";import{f as N}from"./format.DLoIfcQs.js";import{_ as D}from"./_plugin-vue_export-helper.DlAUqK2U.js";import"./utils.CgJh8GwY.js";import"./index.BG3KSLm8.js";import"./moment.BLMuvzoS.js";const j=x({__name:"ListaEtiquetas",props:{data:{},isPending:{type:Boolean},mutationUpdate:{}},setup(d,{expose:o}){o();const n=d,e=k(!1),l=r=>{e:{const{data:t,newValue:a,field:i}=r;a!==t[i]&&n.mutationUpdate.mutate({idetiqueta:t.idetiqueta,[i]:a});break e}};M(()=>{e.value=!0}),U(()=>{e.value=!1});const s={props:n,isMounted:e,handleEdit:l,get DataTable(){return I},get Column(){return B},get formatDate(){return N}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),T={key:0,class:"skeleton h-96 w-full"},L=["onUpdate:modelValue"];function z(d,o,n,e,l,s){const r=E("uppercase");return e.isMounted?(f(),q(e.DataTable,{key:1,class:S({"skeleton select-none":e.props.isPending,"cursor-wait select-none":e.props.mutationUpdate.isPending.value}),value:e.props.data,paginator:!0,rows:5,"edit-mode":"cell",onCellEditComplete:e.handleEdit},{default:u(()=>[c(e.Column,{field:"nombre",header:"Nombre"},{body:u(({data:t,field:a})=>[p(m(t[a]??"---"),1)]),editor:u(({data:t,field:a})=>[w(_("input",{"onUpdate:modelValue":i=>t[a]=i,type:"text",class:"input input-bordered w-full max-w-xs"},null,8,L),[[C,t[a]],[r,t[a]]])]),_:1}),c(e.Column,{field:"createdAt",header:"Fecha de creación",sortable:""},{body:u(({data:t,field:a})=>[p(m(e.formatDate(t[a],"DD-MM-YYYY")),1)]),_:1}),c(e.Column,{field:"updatedAt",header:"Ultima actualización",sortable:""},{body:u(({data:t,field:a})=>[p(m(e.formatDate(t[a],"DD-MM-YYYY")),1)]),_:1})]),_:1},8,["class","value"])):(f(),y("div",T))}const O=D(j,[["render",z]]),G=x({__name:"AddEtiqueta",props:{user:{}},setup(d,{expose:o}){o();const n=d,e=V({nombre:"",idUsuario:n.user}),{data:l,isError:s,isPending:r,refetch:t}=A("etiquetas","etiquetasData"),a=h=>{e.nombre=h.toUpperCase()},i=v("etiquetas","post",{onSuccess:()=>{e.nombre="",t()}}),g=v("etiquetas","put",{onSuccess:()=>{t()}}),b={props:n,body:e,data:l,isError:s,isPending:r,refetch:t,handleInput:a,send:i,edit:g,Input:F,ListaEtiquetas:O};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}});function H(d,o,n,e,l,s){return f(),y(Y,null,[_("form",{onSubmit:o[0]||(o[0]=P(r=>e.send.mutate(e.body),["prevent"])),class:"flex justify-center gap-4 items-end mb-4"},[c(e.Input,{value:e.body.nombre,onSetValue:e.handleInput,label:"Nombre de la etiqueta"},null,8,["value"]),o[1]||(o[1]=_("button",{type:"submit",class:"btn btn-primary"},"Añadir",-1))],32),c(e.ListaEtiquetas,{data:e.data?.response??[],"is-pending":e.isPending,"mutation-update":e.edit},null,8,["data","is-pending","mutation-update"])],64)}const te=D(G,[["render",H]]);export{te as default};
