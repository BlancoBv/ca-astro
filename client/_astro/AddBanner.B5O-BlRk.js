import{d as V,b as g,p as C,y as U,o as x,c as B,f as F,g as i,i as d,h as y,t as f,a as o,n as M,w as v,k as w,j as k,F as j,m as A}from"./index.CVCDyEFK.js";import{a as T,u as h}from"./http.Cre9WaSw.js";import{a as I,s as L,b as N}from"./index.xKhLUDZR.js";import{s as P}from"./index.BGWrKyx7.js";import{h as z}from"./moment.C5S46NFB.js";import{_ as D}from"./_plugin-vue_export-helper.DlAUqK2U.js";import"./utils.yDiRiW9u.js";import"./index.BbQA0y4H.js";const O=V({__name:"ListaBanners",props:{data:{},mutationDelete:{},noEdit:{type:Boolean}},setup(c,{expose:n}){n();const l=c,e=g(!1),r=g([{label:"Mostrar",value:!0},{label:"Dejar de mostrar",value:!1}]);C(()=>{e.value=!0}),U(()=>{e.value=!1});const a={props:l,isMounted:e,selectMostrarItems:r,handleEdit:t=>{const{data:s,newValue:m,field:p}=t;s[p]!==m&&l.mutationDelete.mutate({idbanner:s.idbanner,[p]:m})},get DataTable(){return I},get Column(){return L},get Select(){return N},get Textarea(){return P},get moment(){return z}};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}}),q={key:0,class:"skeleton h-96 w-full"},G=["src","alt"];function X(c,n,l,e,r,u){return e.isMounted?(x(),F(e.DataTable,{key:1,value:e.props.data,paginator:!0,rows:5,"edit-mode":e.props.noEdit?null:"cell",onCellEditComplete:e.handleEdit},{default:i(()=>[d(e.Column,{field:"descripcion",header:"Descripci칩n"},{body:i(({data:a,field:t})=>[y(f(a[t]??"---"),1)]),editor:i(({data:a,field:t})=>[d(e.Textarea,{modelValue:a[t],"onUpdate:modelValue":s=>a[t]=s},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),d(e.Column,{field:"imagen",header:"Imagen"},{body:i(({data:a,field:t})=>[o("img",{class:"object-cover size-12",src:a[t],alt:a[t],width:"50px",height:"50px"},null,8,G)]),_:1}),d(e.Column,{field:"mostrar",header:"Visibilidad"},{body:i(({data:a,field:t})=>[o("div",{class:M(["badge h-max",{"badge-success":a[t],"badge-error":!a[t]}])},f(a[t]?"Visible":"No visible"),3)]),editor:i(({data:a,field:t})=>[d(e.Select,{modelValue:a[t],"onUpdate:modelValue":s=>a[t]=s,options:e.selectMostrarItems,optionLabel:"label",optionValue:"value"},null,8,["modelValue","onUpdate:modelValue","options"])]),_:1}),d(e.Column,{field:"createdAt",header:"Fecha de creaci칩n"},{body:i(({data:a,field:t})=>[y(f(e.moment(a[t]).locale("es-MX").format("L")),1)]),_:1})]),_:1},8,["value","edit-mode"])):(x(),B("div",q))}const H=D(O,[["render",X]]),J=V({__name:"AddBanner",props:{idUsuario:{},noEdit:{type:Boolean}},setup(c,{expose:n}){n();const l=c,e=new FormData,r=A({descripcion:"",url:""}),{refetch:u,data:a}=T("banners","bannersPanelData"),t=h("banners","post",{sendAsFormData:!0,onSuccess(){const b=document.getElementById("input-add-image");b.value="",u()}}),s=h("banners","put",{onSuccess(){u()}}),_={props:l,formData:e,body:r,refetch:u,data:a,sendBanner:t,updateBanner:s,handle:b=>{const{name:S,files:E}=b.target;e.append(S,E[0])},send:()=>{e.append("url",r.url),e.append("descripcion",r.url),e.append("idUsuario",l.idUsuario??""),e.append("mostrar","1"),t.mutate(e)},ListaBanners:H};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),K={class:"form-control w-full max-w-xs"},Q={class:"form-control w-full max-w-xs"},R={class:"form-control w-full max-w-xs"};function W(c,n,l,e,r,u){return x(),B(j,null,[o("form",{onSubmit:k(e.send,["prevent"]),class:"flex gap-4 items-center"},[o("label",K,[n[2]||(n[2]=o("div",{class:"label"},[o("span",{class:"label-text"},"Selecciona una imagen")],-1)),o("input",{name:"imagen",type:"file",class:"file-input file-input-bordered w-full max-w-xs",accept:"image/*",onInput:e.handle,id:"input-add-image",required:""},null,32)]),o("label",Q,[n[3]||(n[3]=o("div",{class:"label"},[o("span",{class:"label-text"},"Descripci칩n")],-1)),v(o("input",{type:"text",class:"input input-bordered w-full max-w-xs","onUpdate:modelValue":n[0]||(n[0]=a=>e.body.descripcion=a)},null,512),[[w,e.body.descripcion]])]),o("label",R,[n[4]||(n[4]=o("div",{class:"label"},[o("span",{class:"label-text"},"Enlace Adjunto")],-1)),v(o("input",{type:"text","onUpdate:modelValue":n[1]||(n[1]=a=>e.body.url=a),class:"input input-bordered w-full max-w-xs"},null,512),[[w,e.body.url]])]),n[5]||(n[5]=o("button",{class:"btn btn-primary",type:"submit"},"A침adir banner",-1))],32),d(e.ListaBanners,{data:e.data?.response,"no-edit":e.props.noEdit,"mutation-delete":e.updateBanner},null,8,["data","no-edit","mutation-delete"])],64)}const se=D(J,[["render",W]]);export{se as default};
