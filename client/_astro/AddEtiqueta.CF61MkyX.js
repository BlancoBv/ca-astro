import{d as x,b as l,c,g as f,w as b,F as m,p as v,e as S,t as V,s as g,h as y,f as h,j as q,k as E}from"./index.DAwKwvHW.js";import{I as T}from"./Input.2u9yJu_R.js";import{u as I,a as C}from"./http.BBymGzR_.js";import{d as B,s as D,a as N}from"./index.C5WA_ONu.js";import{_ as w}from"./_plugin-vue_export-helper.DlAUqK2U.js";import"./utils.BwJ96ihJ.js";import"./index.DO--NrZ_.js";const F=x({__name:"Table",props:{pending:{type:Boolean},error:{type:Boolean},data:{},columns:{},rows:{},editCells:{}},setup(i,{expose:n}){n();const t=i,d={props:t,handleEditCell:u=>{const{data:a,newValue:r,field:o}=u,s=t.editCells.find(p=>p.field==o);s&&a[o]!==r&&s.action(a,r)},get InputText(){return B},get DataTable(){return D},get Column(){return N}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}}),U={key:1,class:"skeleton h-96 w-full"};function j(i,n,t,e,d,u){return l(),c(m,null,[!e.props.pending&&!e.props.error?(l(),f(e.DataTable,{key:0,value:e.props.data??[],paginator:!!t.rows,rows:t.rows,"edit-mode":"cell",onCellEditComplete:e.handleEditCell},{default:b(()=>[(l(!0),c(m,null,v(t.columns,a=>(l(),f(e.Column,{field:a.field,header:a.header,key:a.field},{editor:b(({data:r,field:o})=>[t.editCells.find(s=>s.field===o)?(l(),f(e.InputText,{key:0,modelValue:r[o],"onUpdate:modelValue":s=>r[o]=s,autofocus:"",fluid:""},null,8,["modelValue","onUpdate:modelValue"])):(l(),c(m,{key:1},[S(V(r[o]),1)],64))]),_:2},1032,["field","header"]))),128))]),_:1},8,["value","paginator","rows"])):g("",!0),t.pending?(l(),c("div",U)):g("",!0)],64)}const A=w(F,[["render",j]]),P=x({__name:"AddEtiqueta",props:{user:{}},setup(i,{expose:n}){n();const t=i,e=E({nombre:"",idUsuario:t.user}),{data:d,isError:u,isPending:a,refetch:r}=I("etiquetas","etiquetasData"),o=k=>{e.nombre=k.toUpperCase()},s=C("etiquetas","post",{onSuccess:()=>{e.nombre="",r()}}),p=C("etiquetas","put",{onSuccess:()=>{r()}}),_={props:t,body:e,data:d,isError:u,isPending:a,refetch:r,handleInput:o,send:s,edit:p,Input:T,Table:A};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}});function O(i,n,t,e,d,u){return l(),c(m,null,[y("form",{onSubmit:n[0]||(n[0]=q(a=>e.send.mutate(e.body),["prevent"])),class:"flex justify-center gap-4 items-center"},[h(e.Input,{value:e.body.nombre,onSetValue:e.handleInput,label:"Nombre de la etiqueta"},null,8,["value"]),n[1]||(n[1]=y("button",{type:"submit",class:"btn btn-primary"},"Añadir",-1))],32),h(e.Table,{data:e.data?.response,columns:[{field:"nombre",header:"Nombre"},{field:"createdAt",header:"Fecha de creación"}],pending:e.isPending,error:e.isError,rows:5,"edit-cells":[{field:"nombre",action:(a,r)=>e.edit.mutate({nombre:r.toUpperCase(),idetiqueta:a.idetiqueta})}]},null,8,["data","pending","error","edit-cells"])],64)}const Q=w(P,[["render",O]]);export{Q as default};
