import{d as R,c as p,a as o,k as z,t as r,m as b,p as i,q as E,l as n,w as v,s as x,F as O,b as u,e as m,u as J,j as W,x as G,y as H,o as c}from"./index.BA0kIsUy.js";import"./format.DLoIfcQs.js";import{P as K,L as Q,D as X,S as Z}from"./PlaceholderListPP.CHqyjsWq.js";import{_ as h}from"./_plugin-vue_export-helper.DlAUqK2U.js";import"./moment.BLMuvzoS.js";/* empty css                        */const $=R({__name:"ListaPublicacionesMiembros2",props:{data:{},rows:{}},setup(F,{expose:t}){t();const _=F,l=u(!1),g=u(1),y=u(5),s=u({}),w=u(""),k=u(""),S=u(""),C=u(""),I=a=>{const e=new Intl.ListFormat("es",{type:"conjunction",style:"long"}),d=[];if(Object.keys(a).length<1)return"---";if(a.miembros_publicacion.forEach(f=>{d.push(f.nombreCompleto)}),a.otrosAutores){const f=a.otrosAutores.split(";");d.push(...f)}return d.length<1?"---":e.format(d)},j=a=>a.slice(0,30)+"...",T=a=>a.normalize("NFD").replace(/([^n\u0300-\u036f]|n(?!\u0303(?![\u0300-\u036f])))[\u0300-\u036f]+/gi,"$1").normalize(),M=m(()=>[w.value,S.value,k.value].reduce((a,e)=>e!==""?a+1:a,0)),P=m(()=>{var e=_.data;if(w.value!==""&&(e=e.filter(d=>d.estatus===w.value)),k.value!==""&&(e=e.filter(d=>d.tipo===k.value)),C.value!==""){const d=T(C.value);e=e.filter(f=>{const q=new RegExp(d,"gi"),B=T(`${f.titulo} ${I(f)}`);return q.test(B)})}return e}),D=m(()=>S.value==="ASC"?P.value.toSorted((a,e)=>Number(a.year)-Number(e.year)):S.value==="DESC"?P.value.toSorted((a,e)=>Number(e.year)-Number(a.year)):P.value),V=m(()=>{const a=(g.value-1)*y.value,e=a+y.value;return D.value.slice(a,e)}),U=m(()=>Math.ceil(D.value.length/y.value)),A=m(()=>String(D.value.length).padStart(3,"0")),L=m(()=>s.value),Y=a=>{const e=document.getElementById("modal_publicaciones");s.value=a,e.showModal()};J(D,()=>{g.value=1,H(()=>{g.value=1})}),W(()=>{l.value=!0}),G(()=>{l.value=!1});const N={props:_,isMounted:l,page:g,maxRows:y,rowData:s,filtroEstatus:w,filtroTipo:k,filtroYear:S,filtroTexto:C,getCollabs:I,recortarTexto:j,normalize:T,totalFiltros:M,filteredData:P,sortedData:D,paginatedData:V,totalPages:U,totalElements:A,modalData:L,openModal:Y,StatInfoPP:Z,DebounceInputSearch:X,List:Q,PlaceholderListPP:K};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}}),tt={id:"modal_publicaciones",class:"modal modal-bottom sm:modal-middle not-prose"},ot={class:"modal-box"},lt={class:"text-lg text-balance font-bold"},st={class:"py-4"},at={class:"grid grid-cols-2 grid-rows-3 gap-2 mb-2"},et={class:"flex justify-end mt-2"},it=["href"],nt={key:1,class:"sm:px-20 lg:px-40 not-prose"},rt={class:"grid grid-cols-2 mb-2"},dt={class:"dropdown col-span-2"},ut={tabindex:"0",role:"button",class:"btn mb-2"},bt={class:"badge badge-xs badge-secondary"},mt={tabindex:"0",class:"dropdown-content bg-base-100 shadow menu rounded-box w-80 sm:w-96"},ct={class:"collapse collapse-arrow bg-base-100 border border-base-300"},ft={class:"collapse-title font-semibold"},pt={class:"indicator"},vt={key:0,class:"indicator-item status status-secondary"},xt={class:"collapse-content text-sm"},gt={class:"filter"},yt={class:"collapse collapse-arrow bg-base-100 border border-base-300"},wt={class:"collapse-title font-semibold"},Dt={class:"indicator"},kt={key:0,class:"indicator-item status status-secondary"},St={class:"collapse-content text-sm"},Pt={class:"filter"},_t={class:"join place-self-end"},Ct=["disabled"],Tt=["disabled"],Et={class:"text-xs uppercase font-semibold opacity-60"},Ft={class:"hidden sm:block"},It={class:"sm:hidden"},Nt={class:"list-col-wrap flex flex-wrap gap-2"},jt={class:"badge badge-info badge-xs"},Mt={class:"badge badge-neutral badge-xs"},Vt={class:"badge badge-secondary badge-xs"},Ut=["onClick"],At={class:"font-light text-sm opacity-60 text-end mt-2"};function Lt(F,t,_,l,g,y){return c(),p(O,null,[o("dialog",tt,[o("div",ot,[t[22]||(t[22]=o("form",{method:"dialog"},[o("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},[o("i",{class:"bi bi-x text-2xl"})])],-1)),o("h3",lt,r(l.modalData.titulo),1),o("div",st,[o("div",at,[b(l.StatInfoPP,{class:"row-span-3"},{icon:i(()=>t[11]||(t[11]=[o("i",{class:"bi bi-person-fill"},null,-1)])),title:i(()=>t[12]||(t[12]=[n("Autores")])),data:i(()=>[n(r(l.getCollabs(l.modalData??{})),1)]),_:1}),b(l.StatInfoPP,null,{icon:i(()=>t[13]||(t[13]=[o("i",{class:"bi bi-book-fill"},null,-1)])),title:i(()=>t[14]||(t[14]=[n("ISSN")])),data:i(()=>[n(r(l.modalData.ISSN??"---"),1)]),_:1}),b(l.StatInfoPP,null,{icon:i(()=>t[15]||(t[15]=[o("i",{class:"bi bi-info-circle-fill"},null,-1)])),title:i(()=>t[16]||(t[16]=[n("Tipo")])),data:i(()=>[n(r(l.modalData.tipo?.toUpperCase()),1)]),_:1}),b(l.StatInfoPP,null,{icon:i(()=>t[17]||(t[17]=[o("i",{class:"bi bi-calendar-fill"},null,-1)])),title:i(()=>t[18]||(t[18]=[n("Año de publicación")])),data:i(()=>[n(r(l.modalData.year),1)]),_:1})]),b(l.StatInfoPP,{class:"w-full min-h-50"},{icon:i(()=>t[19]||(t[19]=[o("i",{class:"bi bi-body-text"},null,-1)])),title:i(()=>t[20]||(t[20]=[n("Resumen")])),data:i(()=>[n(r(l.modalData.descripcion??"---"),1)]),_:1}),o("div",et,[l.modalData.url?(c(),p("a",{key:0,class:"btn btn-primary",href:l.modalData.url??"#",target:"_blank"},t[21]||(t[21]=[n(" Ver artículo "),o("i",{class:"bi bi-box-arrow-up-right"},null,-1)]),8,it)):E("",!0)])])])]),l.isMounted?(c(),p("div",nt,[o("div",rt,[o("div",dt,[o("div",ut,[t[23]||(t[23]=o("i",{class:"bi bi-filter"},null,-1)),t[24]||(t[24]=n(" Filtros ")),o("div",bt,r(l.totalFiltros),1)]),o("div",mt,[o("div",ct,[t[26]||(t[26]=o("input",{type:"radio",name:"filtros-proyectos"},null,-1)),o("div",ft,[o("div",pt,[l.filtroYear!==""?(c(),p("span",vt)):E("",!0),t[25]||(t[25]=n(" Año de publicación "))])]),o("div",xt,[o("form",gt,[o("input",{class:"btn btn-square",type:"reset",value:"×",onClick:t[0]||(t[0]=s=>l.filtroYear="")}),v(o("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.filtroYear=s),value:"DESC",class:"btn",type:"radio",name:"frameworks","aria-label":"Del más reciente al más antigüo"},null,512),[[x,l.filtroYear]]),v(o("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.filtroYear=s),value:"ASC",class:"btn",type:"radio",name:"frameworks","aria-label":"Del más antigüo al más reciente"},null,512),[[x,l.filtroYear]])])])]),o("div",yt,[t[28]||(t[28]=o("input",{type:"radio",name:"filtros-proyectos"},null,-1)),o("div",wt,[o("div",Dt,[l.filtroTipo!==""?(c(),p("span",kt)):E("",!0),t[27]||(t[27]=n(" Tipo "))])]),o("div",St,[o("form",Pt,[o("input",{class:"btn btn-square",type:"reset",value:"×",onClick:t[3]||(t[3]=s=>l.filtroTipo="")}),v(o("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.filtroTipo=s),value:"arbitrado",class:"btn",type:"radio",name:"frameworks","aria-label":"Arbitrado"},null,512),[[x,l.filtroTipo]]),v(o("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.filtroTipo=s),value:"memoria en extenso",class:"btn",type:"radio",name:"frameworks","aria-label":"Memoría en extenso"},null,512),[[x,l.filtroTipo]]),v(o("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>l.filtroTipo=s),value:"journal",class:"btn",type:"radio",name:"frameworks","aria-label":"Journal"},null,512),[[x,l.filtroTipo]]),v(o("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>l.filtroTipo=s),value:"indexado",class:"btn",type:"radio",name:"frameworks","aria-label":"Indexado"},null,512),[[x,l.filtroTipo]])])])])])]),o("div",null,[b(l.DebounceInputSearch,{value:l.filtroTexto,"onUpdate:value":t[8]||(t[8]=s=>l.filtroTexto=s),placeholder:"Nombre miembro/colaborador o título de proyecto"},null,8,["value"])]),o("div",_t,[o("button",{class:"join-item btn",disabled:l.totalPages===0||l.page<=1,onClick:t[9]||(t[9]=s=>l.page--)},t[29]||(t[29]=[o("i",{class:"bi bi-caret-left-fill"},null,-1)]),8,Ct),o("button",{class:"join-item btn",disabled:l.totalPages===0||l.page>=l.totalPages,onClick:t[10]||(t[10]=s=>l.page++)},t[30]||(t[30]=[o("i",{class:"bi bi-caret-right-fill"},null,-1)]),8,Tt)])]),b(l.List,{data:l.paginatedData??[],"key-title":"proyecto-title","key-empty":"proyecto-empty"},{titulo:i(()=>t[31]||(t[31]=[n("Todos las publicaciones")])),row:i(({data:s})=>[(c(),p("li",{class:"list-row",key:`publicacion-${s.idpublicacion}`},[t[36]||(t[36]=o("div",null,[o("i",{class:"bi bi-journal text-4xl"})],-1)),o("div",null,[o("div",null,r(l.getCollabs(s)),1),o("div",Et,[o("span",Ft,r(s.titulo),1),o("span",It,r(l.recortarTexto(s.titulo)),1)])]),o("div",Nt,[o("div",jt,[t[32]||(t[32]=o("i",{class:"bi bi-calendar-fill"},null,-1)),n(r(s.year),1)]),o("div",Mt,[t[33]||(t[33]=o("i",{class:"bi bi-info-circle-fill"},null,-1)),n(r(s.tipo?.toUpperCase()),1)]),o("div",Vt,[t[34]||(t[34]=o("i",{class:"bi bi-book-fill"},null,-1)),n(r(s.ISSN??"---"),1)])]),o("button",{class:"btn btn-square btn-ghost",onClick:w=>l.openModal(s)},t[35]||(t[35]=[o("i",{class:"bi bi-arrows-fullscreen text-xl"},null,-1)]),8,Ut)]))]),empty:i(()=>t[37]||(t[37]=[o("li",{class:"list-row",key:"proyecto-empty"},[o("div",null,[o("i",{class:"bi bi-emoji-frown-fill text-4xl"})]),o("div",null,[o("div",null,"Sin publicaciones")]),o("p",{class:"list-col-wrap text-xs"}," No existen registros que incluyan a este miembro del cuerpo academico como autor. ")],-1)])),_:1},8,["data"]),o("p",At,r(l.totalElements)+" elementos ",1)])):(c(),z(l.PlaceholderListPP,{key:0}))],64)}const Jt=h($,[["render",Lt]]);export{Jt as default};
