import{d as R,c as p,a as t,k as W,t as r,n as _,l as e,m,p as a,q as T,w as v,s as g,F as G,b,e as c,u as H,j as J,x as K,y as Q,o as f}from"./index.BA0kIsUy.js";import{a as X}from"./format.DLoIfcQs.js";import{P as Y,L as Z,D as h,S as $}from"./PlaceholderListPP.CHqyjsWq.js";/* empty css                        */import{_ as oo}from"./_plugin-vue_export-helper.DlAUqK2U.js";import"./moment.BLMuvzoS.js";/* empty css                        */const to=R({__name:"ListaProyectosMiembros2",props:{data:{},rows:{}},setup(I,{expose:o}){o();const S=I,s=b(!1),y=b(1),x=b(5),l=b({}),w=b(""),P=b(""),k=b(""),E=b(""),z=i=>{const n=new Intl.ListFormat("es",{type:"conjunction",style:"long"}),d=[];if(Object.keys(i).length<1)return"---";if(i.miembros_proyecto.forEach(u=>{d.push(u.nombreCompleto)}),i.otrosColaboradores){const u=i.otrosColaboradores.split(";");d.push(...u)}return d.length<1?"---":n.format(d)},U=i=>i.slice(0,30)+"...",M=i=>i.normalize("NFD").replace(/([^n\u0300-\u036f]|n(?!\u0303(?![\u0300-\u036f])))[\u0300-\u036f]+/gi,"$1").normalize(),V=c(()=>[w.value,k.value,P.value].reduce((i,n)=>n!==""?i+1:i,0)),C=c(()=>{var n=S.data;if(w.value!==""&&(n=n.filter(d=>d.estatus===w.value)),P.value!==""&&(n=n.filter(d=>d.tipo===P.value)),E.value!==""){const d=M(E.value);n=n.filter(u=>{const A=new RegExp(d,"gi"),O=M(`${u.titulo} ${u.director_proyecto?.nombreCompleto} ${z(u)}`);return A.test(O)})}return n}),D=c(()=>k.value==="ASC"?C.value.toSorted((i,n)=>Number(i.monto)-Number(n.monto)):k.value==="DESC"?C.value.toSorted((i,n)=>Number(n.monto)-Number(i.monto)):C.value),F=c(()=>{const i=(y.value-1)*x.value,n=i+x.value;return D.value.slice(i,n)}),j=c(()=>Math.ceil(D.value.length/x.value)),L=c(()=>String(D.value.length).padStart(3,"0")),q=c(()=>l.value),B=i=>{const n=document.getElementById("modal_proyectos");l.value=i,n.showModal()};H(D,()=>{y.value=1,Q(()=>{y.value=1})}),J(()=>{s.value=!0}),K(()=>{s.value=!1});const N={props:S,isMounted:s,page:y,maxRows:x,rowData:l,filtroEstatus:w,filtroTipo:P,filtroMonto:k,filtroTexto:E,getCollabs:z,recortarTexto:U,normalize:M,totalFiltros:V,filteredData:C,sortedData:D,paginatedData:F,totalPages:j,totalElements:L,modalData:q,openModal:B,get formatMoneda(){return X},StatInfoPP:$,DebounceInputSearch:h,List:Z,PlaceholderListPP:Y};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}}),so={id:"modal_proyectos",class:"modal modal-bottom sm:modal-middle not-prose"},lo={class:"modal-box"},ao={class:"text-lg text-balance font-bold"},eo={class:"py-4"},io={class:"steps w-full pb-4"},no={class:"grid grid-cols-2 grid-rows-6 gap-2"},ro={key:1,class:"sm:px-20 lg:px-40 not-prose"},mo={class:"grid grid-cols-2 mb-2"},bo={class:"dropdown col-span-2"},uo={tabindex:"0",role:"button",class:"btn mb-2"},co={class:"badge badge-xs badge-secondary"},fo={tabindex:"0",class:"dropdown-content bg-base-100 shadow menu rounded-box w-80 sm:w-96"},po={class:"collapse collapse-arrow bg-base-100 border border-base-300"},vo={class:"collapse-title font-semibold"},go={class:"indicator"},yo={key:0,class:"indicator-item status status-secondary"},xo={class:"collapse-content text-sm"},wo={class:"filter"},Do={class:"collapse collapse-arrow bg-base-100 border border-base-300"},Po={class:"collapse-title font-semibold"},ko={class:"indicator"},Co={key:0,class:"indicator-item status status-secondary"},So={class:"collapse-content text-sm"},Eo={class:"filter"},Mo={class:"collapse collapse-arrow bg-base-100 border border-base-300"},_o={class:"collapse-title font-semibold"},To={class:"indicator"},Io={key:0,class:"indicator-item status status-secondary"},zo={class:"collapse-content text-sm"},No={class:"filter"},Uo={class:"join place-self-end"},Vo=["disabled"],Fo=["disabled"],jo={class:"text-xs uppercase font-semibold opacity-60"},Lo={class:"hidden sm:block"},qo={class:"sm:hidden"},Bo={class:"list-col-wrap flex flex-wrap gap-2"},Ao={class:"badge badge-accent badge-xs"},Oo={class:"badge badge-neutral badge-xs"},Ro=["onClick"],Wo={class:"font-light text-sm opacity-60 text-end mt-2"};function Go(I,o,S,s,y,x){return f(),p(G,null,[t("dialog",so,[t("div",lo,[o[29]||(o[29]=t("form",{method:"dialog"},[t("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},[t("i",{class:"bi bi-x text-2xl"})])],-1)),t("h3",ao,r(s.modalData.titulo),1),t("div",eo,[t("ul",io,[t("li",{class:_(["step step-info",{"step-info":s.rowData.estatus!=="finalizado","step-success":s.rowData.estatus==="finalizado"}])},o[12]||(o[12]=[t("span",{class:"step-icon"},[t("i",{class:"bi bi-flag"})],-1),e("En proceso ")]),2),t("li",{class:_(["step",{"step-success":s.rowData.estatus==="finalizado"}])},o[13]||(o[13]=[t("span",{class:"step-icon"},[t("i",{class:"bi bi-flag-fill"})],-1),e("Finalizado ")]),2)]),t("div",no,[m(s.StatInfoPP,null,{icon:a(()=>o[14]||(o[14]=[t("i",{class:"bi bi-key-fill"},null,-1)])),title:a(()=>o[15]||(o[15]=[e("Clave")])),data:a(()=>[e(r(s.modalData.clave),1)]),_:1}),m(s.StatInfoPP,null,{icon:a(()=>o[16]||(o[16]=[t("i",{class:"bi bi-info-circle-fill"},null,-1)])),title:a(()=>o[17]||(o[17]=[e("Tipo")])),data:a(()=>[e(r(s.modalData.tipo?.toUpperCase()),1)]),_:1}),m(s.StatInfoPP,null,{icon:a(()=>o[18]||(o[18]=[t("i",{class:"bi bi-file-earmark-fill"},null,-1)])),title:a(()=>o[19]||(o[19]=[e("Convocatoria")])),data:a(()=>[e(r(s.modalData.convocatoria),1)]),_:1}),m(s.StatInfoPP,null,{icon:a(()=>o[20]||(o[20]=[t("i",{class:"bi bi-currency-dollar"},null,-1)])),title:a(()=>o[21]||(o[21]=[e("Monto")])),data:a(()=>[e(r(s.formatMoneda(s.modalData.monto)),1)]),_:1}),m(s.StatInfoPP,{class:"row-span-2"},{icon:a(()=>o[22]||(o[22]=[t("i",{class:"bi bi-calendar-range"},null,-1)])),title:a(()=>o[23]||(o[23]=[e("Vigencia")])),data:a(()=>[e(r(s.modalData.fechaInicio)+" - "+r(s.modalData.fechaTermino),1)]),_:1}),m(s.StatInfoPP,{class:"row-span-2"},{icon:a(()=>o[24]||(o[24]=[t("i",{class:"bi bi-calendar-range-fill"},null,-1)])),title:a(()=>o[25]||(o[25]=[e("Entrega final")])),data:a(()=>[e(r(s.modalData.fechaInicio)+" - "+r(s.modalData.fechaTermino),1)]),_:1}),m(s.StatInfoPP,{class:"col-span-2"},{icon:a(()=>o[26]||(o[26]=[t("i",{class:"bi bi-person-fill"},null,-1)])),title:a(()=>o[27]||(o[27]=[e("Director de proyecto")])),data:a(()=>[e(r(s.modalData.director_proyecto?.nombreCompleto),1)]),_:1}),m(s.StatInfoPP,{class:"col-span-2"},{title:a(()=>o[28]||(o[28]=[e("Otros colaboradores")])),data:a(()=>[e(r(s.getCollabs(s.modalData??{})),1)]),_:1})])])])]),s.isMounted?(f(),p("div",ro,[t("div",mo,[t("div",bo,[t("div",uo,[o[30]||(o[30]=t("i",{class:"bi bi-filter"},null,-1)),o[31]||(o[31]=e(" Filtros ")),t("div",co,r(s.totalFiltros),1)]),t("div",fo,[t("div",po,[o[33]||(o[33]=t("input",{type:"radio",name:"filtros-proyectos",checked:""},null,-1)),t("div",vo,[t("div",go,[s.filtroEstatus!==""?(f(),p("span",yo)):T("",!0),o[32]||(o[32]=e(" Estatus "))])]),t("div",xo,[t("form",wo,[t("input",{class:"btn btn-square",type:"reset",value:"×",onClick:o[0]||(o[0]=l=>s.filtroEstatus="")}),v(t("input",{"onUpdate:modelValue":o[1]||(o[1]=l=>s.filtroEstatus=l),value:"en proceso",class:"btn",type:"radio",name:"frameworks","aria-label":"En proceso"},null,512),[[g,s.filtroEstatus]]),v(t("input",{"onUpdate:modelValue":o[2]||(o[2]=l=>s.filtroEstatus=l),value:"finalizado",class:"btn",type:"radio",name:"frameworks","aria-label":"Finalizado"},null,512),[[g,s.filtroEstatus]])])])]),t("div",Do,[o[35]||(o[35]=t("input",{type:"radio",name:"filtros-proyectos"},null,-1)),t("div",Po,[t("div",ko,[s.filtroMonto!==""?(f(),p("span",Co)):T("",!0),o[34]||(o[34]=e(" Monto "))])]),t("div",So,[t("form",Eo,[t("input",{class:"btn btn-square",type:"reset",value:"×",onClick:o[3]||(o[3]=l=>s.filtroMonto="")}),v(t("input",{"onUpdate:modelValue":o[4]||(o[4]=l=>s.filtroMonto=l),value:"DESC",class:"btn",type:"radio",name:"frameworks","aria-label":"De mayor a menor"},null,512),[[g,s.filtroMonto]]),v(t("input",{"onUpdate:modelValue":o[5]||(o[5]=l=>s.filtroMonto=l),value:"ASC",class:"btn",type:"radio",name:"frameworks","aria-label":"De menor a mayor"},null,512),[[g,s.filtroMonto]])])])]),t("div",Mo,[o[37]||(o[37]=t("input",{type:"radio",name:"filtros-proyectos"},null,-1)),t("div",_o,[t("div",To,[s.filtroTipo!==""?(f(),p("span",Io)):T("",!0),o[36]||(o[36]=e(" Tipo "))])]),t("div",zo,[t("form",No,[t("input",{class:"btn btn-square",type:"reset",value:"×",onClick:o[6]||(o[6]=l=>s.filtroTipo="")}),v(t("input",{"onUpdate:modelValue":o[7]||(o[7]=l=>s.filtroTipo=l),value:"interno",class:"btn",type:"radio",name:"frameworks","aria-label":"Interno"},null,512),[[g,s.filtroTipo]]),v(t("input",{"onUpdate:modelValue":o[8]||(o[8]=l=>s.filtroTipo=l),value:"externo",class:"btn",type:"radio",name:"frameworks","aria-label":"Externo"},null,512),[[g,s.filtroTipo]])])])])])]),t("div",null,[m(s.DebounceInputSearch,{value:s.filtroTexto,"onUpdate:value":o[9]||(o[9]=l=>s.filtroTexto=l),placeholder:"Nombre miembro/colaborador o título de proyecto"},null,8,["value"])]),t("div",Uo,[t("button",{class:"join-item btn",disabled:s.totalPages===0||s.page<=1,onClick:o[10]||(o[10]=l=>s.page--)},o[38]||(o[38]=[t("i",{class:"bi bi-caret-left-fill"},null,-1)]),8,Vo),t("button",{class:"join-item btn",disabled:s.totalPages===0||s.page>=s.totalPages,onClick:o[11]||(o[11]=l=>s.page++)},o[39]||(o[39]=[t("i",{class:"bi bi-caret-right-fill"},null,-1)]),8,Fo)])]),m(s.List,{data:s.paginatedData??[],"key-title":"proyecto-title","key-empty":"proyecto-empty"},{titulo:a(()=>o[40]||(o[40]=[e("Todos los proyectos")])),row:a(({data:l})=>[(f(),p("li",{class:"list-row",key:`proyecto-${l.idproyecto}`},[o[44]||(o[44]=t("div",null,[t("i",{class:"bi bi-puzzle-fill text-4xl"})],-1)),t("div",null,[t("div",null,r(l.director_proyecto?.nombreCompleto),1),t("div",jo,[t("span",Lo,r(l.titulo),1),t("span",qo,r(s.recortarTexto(l.titulo)),1)])]),t("div",Bo,[t("div",Ao,r(s.formatMoneda(l.monto)),1),t("div",Oo,[o[41]||(o[41]=t("i",{class:"bi bi-info-circle-fill"},null,-1)),e(r(l.tipo?.toUpperCase()),1)]),t("div",{class:_(["badge badge-xs",{"badge-success":l.estatus==="finalizado","badge-info":l.estatus==="en proceso"}])},[o[42]||(o[42]=t("i",{class:"bi bi-flag-fill"},null,-1)),e(r(l.estatus?.toUpperCase()),1)],2)]),t("button",{class:"btn btn-square btn-ghost",onClick:w=>s.openModal(l)},o[43]||(o[43]=[t("i",{class:"bi bi-arrows-fullscreen text-xl"},null,-1)]),8,Ro)]))]),empty:a(()=>o[45]||(o[45]=[t("li",{class:"list-row",key:"proyecto-empty"},[t("div",null,[t("i",{class:"bi bi-emoji-frown-fill text-4xl"})]),t("div",null,[t("div",null,"Sin proyectos")]),t("p",{class:"list-col-wrap text-xs"}," No existen registros que incluyan a este miembro del cuerpo academico como director o colaborador. ")],-1)])),_:1},8,["data"]),t("p",Wo,r(s.totalElements)+" elementos ",1)])):(f(),W(s.PlaceholderListPP,{key:0}))],64)}const ho=oo(to,[["render",Go]]);export{ho as default};
