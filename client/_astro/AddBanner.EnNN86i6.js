import{d as V,b as g,j as C,I as U,o as x,c as B,G as F,H as d,m as i,n as y,t as f,a as o,E as M,w as v,g as w,f as k,F as j,i as A}from"./index.DLAxijO8.js";import{a as I,u as h}from"./http.DlgmvE8u.js";import{s as T,a as L,b as N}from"./index.O5SMKElr.js";import{s as P}from"./index.Cd07BRo1.js";import{h as z}from"./moment.C5S46NFB.js";import{_ as D}from"./_plugin-vue_export-helper.DlAUqK2U.js";import"./utils.eLTsyS1M.js";import"./index.Dgm2gvju.js";const G=V({__name:"ListaBanners",props:{data:{},mutationDelete:{},noEdit:{type:Boolean}},setup(c,{expose:n}){n();const l=c,e=g(!1),r=g([{label:"Mostrar",value:!0},{label:"Dejar de mostrar",value:!1}]);C(()=>{e.value=!0}),U(()=>{e.value=!1});const a={props:l,isMounted:e,selectMostrarItems:r,handleEdit:t=>{const{data:s,newValue:m,field:p}=t;s[p]!==m&&l.mutationDelete.mutate({idbanner:s.idbanner,[p]:m})},get DataTable(){return T},get Column(){return L},get Select(){return N},get Textarea(){return P},get moment(){return z}};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}}),O={key:0,class:"skeleton h-96 w-full"},q=["src","alt"];function H(c,n,l,e,r,u){return e.isMounted?(x(),F(e.DataTable,{key:1,value:e.props.data,paginator:!0,rows:5,"edit-mode":e.props.noEdit?null:"cell",onCellEditComplete:e.handleEdit},{default:d(()=>[i(e.Column,{field:"descripcion",header:"Descripci칩n"},{body:d(({data:a,field:t})=>[y(f(a[t]??"---"),1)]),editor:d(({data:a,field:t})=>[i(e.Textarea,{modelValue:a[t],"onUpdate:modelValue":s=>a[t]=s},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),i(e.Column,{field:"imagen",header:"Imagen"},{body:d(({data:a,field:t})=>[o("img",{class:"object-cover size-12",src:a[t],alt:a[t],width:"50px",height:"50px"},null,8,q)]),_:1}),i(e.Column,{field:"mostrar",header:"Estatus"},{body:d(({data:a,field:t})=>[o("div",{class:M(["badge h-max",{"badge-success":a[t],"badge-error":!a[t]}])},f(a[t]?"Visible":"No visible"),3)]),editor:d(({data:a,field:t})=>[i(e.Select,{modelValue:a[t],"onUpdate:modelValue":s=>a[t]=s,options:e.selectMostrarItems,optionLabel:"label",optionValue:"value"},null,8,["modelValue","onUpdate:modelValue","options"])]),_:1}),i(e.Column,{field:"createdAt",header:"Fecha de creaci칩n"},{body:d(({data:a,field:t})=>[y(f(e.moment(a[t]).locale("es-MX").format("L")),1)]),_:1})]),_:1},8,["value","edit-mode"])):(x(),B("div",O))}const X=D(G,[["render",H]]),J=V({__name:"AddBanner",props:{idUsuario:{},noEdit:{type:Boolean}},setup(c,{expose:n}){n();const l=c,e=new FormData,r=A({descripcion:"",url:""}),{refetch:u,data:a}=I("banners","bannersPanelData"),t=h("banners","post",{sendAsFormData:!0,onSuccess(){const b=document.getElementById("input-add-image");b.value="",u()}}),s=h("banners","put",{onSuccess(){u()}}),_={props:l,formData:e,body:r,refetch:u,data:a,sendBanner:t,updateBanner:s,handle:b=>{const{name:E,files:S}=b.target;e.append(E,S[0])},send:()=>{e.append("url",r.url),e.append("descripcion",r.url),e.append("idUsuario",l.idUsuario??""),e.append("mostrar","1"),t.mutate(e)},ListaBanners:X};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),K={class:"form-control w-full max-w-xs"},Q={class:"form-control w-full max-w-xs"},R={class:"form-control w-full max-w-xs"};function W(c,n,l,e,r,u){return x(),B(j,null,[o("form",{onSubmit:k(e.send,["prevent"]),class:"flex gap-4 items-center"},[o("label",K,[n[2]||(n[2]=o("div",{class:"label"},[o("span",{class:"label-text"},"Selecciona una imagen")],-1)),o("input",{name:"imagen",type:"file",class:"file-input file-input-bordered w-full max-w-xs",accept:"image/*",onInput:e.handle,id:"input-add-image",required:""},null,32)]),o("label",Q,[n[3]||(n[3]=o("div",{class:"label"},[o("span",{class:"label-text"},"Descripci칩n")],-1)),v(o("input",{type:"text",class:"input input-bordered w-full max-w-xs","onUpdate:modelValue":n[0]||(n[0]=a=>e.body.descripcion=a)},null,512),[[w,e.body.descripcion]])]),o("label",R,[n[4]||(n[4]=o("div",{class:"label"},[o("span",{class:"label-text"},"Enlace Adjunto")],-1)),v(o("input",{type:"text","onUpdate:modelValue":n[1]||(n[1]=a=>e.body.url=a),class:"input input-bordered w-full max-w-xs"},null,512),[[w,e.body.url]])]),n[5]||(n[5]=o("button",{class:"btn btn-primary",type:"submit"},"A침adir banner",-1))],32),i(e.ListaBanners,{data:e.data?.response,"no-edit":e.props.noEdit,"mutation-delete":e.updateBanner},null,8,["data","no-edit","mutation-delete"])],64)}const se=D(J,[["render",W]]);export{se as default};
