import{d as f,g as c,c as u,a,j as S,p as s,t as v,w,F as D,f as E}from"./index.D8K0Xl66.js";import{e as k,E as B,I as C,S as q}from"./EditorInstance.4qIt39Lu.js";import{I as A}from"./Input.Dz35h15R.js";import{h as F}from"./moment.C5S46NFB.js";import{a as Y,u as b}from"./http.BT3W8ybg.js";import{_ as h}from"./_plugin-vue_export-helper.DlAUqK2U.js";import"./utils.x8l0Hx9r.js";const M=f({__name:"AddImage",setup(m,{expose:t}){t();const{refetch:l}=Y("imagenes","imagesGalleryData"),e=b("imagenes","post",{sendAsFormData:!0,onSuccess(){const o=document.getElementById("input-add-image"),r=document.getElementById("modal-add-image");o.value="",r.close(),l()}}),d={refetch:l,send:e,handleImage:o=>{const r=new FormData,{files:g}=o.target;r.append("imagen",g[0]),e.mutate(r)}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}}),j={id:"modal-add-image",class:"modal"},T={class:"modal-box w-6/12 max-w-5xl h-5/6"},V={class:"form-control w-full max-w-xs"};function O(m,t,l,e,i,d){return c(),u("dialog",j,[a("div",T,[t[2]||(t[2]=a("form",{method:"dialog"},[a("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕")],-1)),t[3]||(t[3]=a("h3",{class:"text-lg font-bold"},"Añadir nueva imagen",-1)),a("form",null,[a("label",V,[t[0]||(t[0]=a("div",{class:"label"},[a("span",{class:"label-text"},"Selecciona una imagen")],-1)),t[1]||(t[1]=S(" sdadasda ")),a("input",{type:"file",class:"file-input file-input-bordered w-full max-w-xs",accept:"image/*",onInput:e.handleImage,id:"input-add-image"},null,32)])])]),t[4]||(t[4]=a("form",{method:"dialog",class:"modal-backdrop"},[a("button",null,"close")],-1))])}const G=h(M,[["render",O]]),N=f({__name:"AddBlog",props:{idUsuario:{}},setup(m,{expose:t}){t();const l=m,e=new Date(Date.now()),i=F(e),d=b("blogs","post",{onSuccess(){o.titulo="",o.contenido="",o.fecha=i.format("YYYY-MM-DD"),o.imagen="",o.etiquetas=[]}}),o=E({titulo:"",contenido:"",fecha:i.format("YYYY-MM-DD"),estatus:"aceptado",imagen:"",usuarios_id:l.idUsuario,etiquetas:[]}),r=()=>{document.getElementById("modal-image-main").showModal()},g=n=>{o.imagen=n,document.getElementById("modal-image-main").close()},_=n=>{o.titulo=n},x=n=>{o.fecha=n},y=n=>{o.etiquetas=n},I=k(o),p={props:l,dateLocal:e,m:i,send:d,body:o,openImageSelector:r,handleClick:g,handleChangeTitulo:_,handleChangeFecha:x,handleEtiquetas:y,editor:I,Editor:B,Input:A,ImageSelector:C,SelectEtiqueta:q,AddImage:G};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}}),P={class:"flex gap-4 flex-wrap items-center pb-4"},U={class:"flex gap-4 items-center"},L={key:0,class:"w-24 h-24 text-xs"},z=["src"];function H(m,t,l,e,i,d){return c(),u(D,null,[s(e.AddImage),s(e.ImageSelector,{"editor-instance":e.editor},null,8,["editor-instance"]),s(e.ImageSelector,{id:"modal-image-main",onAddImageToObject:e.handleClick}),a("form",{onSubmit:t[0]||(t[0]=w(()=>{e.send.mutate(e.body)},["prevent"]))},[a("div",P,[s(e.Input,{value:e.body.titulo,label:"Titulo del blog",type:"text",onSetValue:e.handleChangeTitulo},null,8,["value"]),s(e.Input,{value:e.body.fecha,label:"Fecha",type:"date",onSetValue:e.handleChangeFecha},null,8,["value"]),a("div",U,[e.body.imagen.length<1?(c(),u("p",L,"Selecciona una imagen para ver la vista previa")):(c(),u("img",{key:1,src:e.body.imagen,class:"object-contain",width:"96px",height:"96px"},null,8,z)),a("button",{onClick:e.openImageSelector,class:"btn btn-secondary",type:"button"},v(e.body.imagen.length<1?"Seleccionar":"Cambiar")+" imagen principal",1)]),s(e.SelectEtiqueta,{value:e.body.etiquetas,onSetOption:e.handleEtiquetas},null,8,["value"])]),s(e.Editor,{editor:e.editor},null,8,["editor"]),t[1]||(t[1]=a("button",{class:"btn btn-primary",type:"submit"},"Guardar",-1))],32)],64)}const ee=h(N,[["render",H]]);export{ee as default};
