import{d as V,b as g,j as U,y as F,o as x,c as D,k as M,l as d,s as i,m as v,t as f,a as s,n as k,w,g as y,f as E,F as j,i as A}from"./index.CZZ2clTV.js";import{a as T,u as h}from"./http.B98zwvpt.js";import{a as I,s as L,b as N}from"./index.B1ODj8LA.js";import{s as P}from"./index.DDG4ssE-.js";import{h as z}from"./moment.C5S46NFB.js";import{_ as B}from"./_plugin-vue_export-helper.DlAUqK2U.js";import"./utils.BuRkxpfH.js";import"./index.hyblILCu.js";const O=V({__name:"ListaBanners",props:{data:{},mutationDelete:{}},setup(c,{expose:n}){n();const l=c,e=g(!1),r=g([{label:"Mostrar",value:!0},{label:"Dejar de mostrar",value:!1}]);U(()=>{e.value=!0}),F(()=>{e.value=!1});const a={props:l,isMounted:e,selectMostrarItems:r,handleEdit:t=>{const{data:o,newValue:m,field:p}=t;o[p]!==m&&l.mutationDelete.mutate({idbanner:o.idbanner,[p]:m})},get DataTable(){return I},get Column(){return L},get Select(){return N},get Textarea(){return P},get moment(){return z}};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}}),q={key:0,class:"skeleton h-96 w-full"},G=["src","alt"];function X(c,n,l,e,r,u){return e.isMounted?(x(),M(e.DataTable,{key:1,value:e.props.data,paginator:!0,rows:5,"edit-mode":"cell",onCellEditComplete:e.handleEdit},{default:d(()=>[i(e.Column,{field:"descripcion",header:"Descripci칩n"},{body:d(({data:a,field:t})=>[v(f(a[t]??"---"),1)]),editor:d(({data:a,field:t})=>[i(e.Textarea,{modelValue:a[t],"onUpdate:modelValue":o=>a[t]=o},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),i(e.Column,{field:"imagen",header:"Imagen"},{body:d(({data:a,field:t})=>[s("img",{class:"object-cover size-12",src:a[t],alt:a[t],width:"50px",height:"50px"},null,8,G)]),_:1}),i(e.Column,{field:"mostrar",header:"Estatus"},{body:d(({data:a,field:t})=>[s("div",{class:k(["badge h-max",{"badge-success":a[t],"badge-error":!a[t]}])},f(a[t]?"Visible":"No visible"),3)]),editor:d(({data:a,field:t})=>[i(e.Select,{modelValue:a[t],"onUpdate:modelValue":o=>a[t]=o,options:e.selectMostrarItems,optionLabel:"label",optionValue:"value"},null,8,["modelValue","onUpdate:modelValue","options"])]),_:1}),i(e.Column,{field:"createdAt",header:"Fecha de creaci칩n"},{body:d(({data:a,field:t})=>[v(f(e.moment(a[t]).locale("es-MX").format("L")),1)]),_:1})]),_:1},8,["value"])):(x(),D("div",q))}const H=B(O,[["render",X]]),J=V({__name:"AddBanner",props:{idUsuario:{}},setup(c,{expose:n}){n();const l=c,e=new FormData,r=A({descripcion:"",url:""}),{refetch:u,data:a}=T("banners","bannersPanelData"),t=h("banners","post",{sendAsFormData:!0,onSuccess(){const b=document.getElementById("input-add-image");b.value="",u()}}),o=h("banners","put",{onSuccess(){u()}}),_={props:l,formData:e,body:r,refetch:u,data:a,sendBanner:t,updateBanner:o,handle:b=>{const{name:S,files:C}=b.target;e.append(S,C[0])},send:()=>{e.append("url",r.url),e.append("descripcion",r.url),e.append("idUsuario",l.idUsuario??""),e.append("mostrar","1"),t.mutate(e)},ListaBanners:H};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),K={class:"form-control w-full max-w-xs"},Q={class:"form-control w-full max-w-xs"},R={class:"form-control w-full max-w-xs"};function W(c,n,l,e,r,u){return x(),D(j,null,[s("form",{onSubmit:E(e.send,["prevent"]),class:"flex gap-4 items-center"},[s("label",K,[n[2]||(n[2]=s("div",{class:"label"},[s("span",{class:"label-text"},"Selecciona una imagen")],-1)),s("input",{name:"imagen",type:"file",class:"file-input file-input-bordered w-full max-w-xs",accept:"image/*",onInput:e.handle,id:"input-add-image",required:""},null,32)]),s("label",Q,[n[3]||(n[3]=s("div",{class:"label"},[s("span",{class:"label-text"},"Descripci칩n")],-1)),w(s("input",{type:"text",class:"input input-bordered w-full max-w-xs","onUpdate:modelValue":n[0]||(n[0]=a=>e.body.descripcion=a)},null,512),[[y,e.body.descripcion]])]),s("label",R,[n[4]||(n[4]=s("div",{class:"label"},[s("span",{class:"label-text"},"Enlace Adjunto")],-1)),w(s("input",{type:"text","onUpdate:modelValue":n[1]||(n[1]=a=>e.body.url=a),class:"input input-bordered w-full max-w-xs"},null,512),[[y,e.body.url]])]),n[5]||(n[5]=s("button",{class:"btn btn-primary",type:"submit"},"A침adir banner",-1))],32),i(e.ListaBanners,{data:e.data?.response,"mutation-delete":e.updateBanner},null,8,["data","mutation-delete"])],64)}const oe=B(J,[["render",W]]);export{oe as default};
