import{d as b,g as s,c,a as p,t as w,h as f,i as g,F as m,k as V,j as k,D as y,A as C,w as q,f as E}from"./index.kqLnMLfz.js";import{_ as h}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{a as I,u as v}from"./http.LwPWeSUb.js";import{b as T,a as D,s as B}from"./index.Q69e_D5N.js";import"./utils.BCEooPGZ.js";import"./index.B7rPBHw-.js";const N=b({__name:"Input",props:{value:{},label:{}},emits:["setValue"],setup(l,{expose:r,emit:t}){r();const e=t,n={emit:e,props:l,handleChange:a=>{const{value:o}=a.target;e("setValue",o)}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),j={class:"form-control w-full max-w-xs"},A={class:"label"},F={class:"label-text"},P=["value"];function U(l,r,t,e,i,u){return s(),c("label",j,[p("div",A,[p("span",F,w(e.props.label),1)]),p("input",{type:"text",class:"input input-bordered w-full max-w-xs",required:"",onInput:e.handleChange,value:e.props.value},null,40,P)])}const O=h(N,[["render",U]]),G=b({__name:"Table",props:{pending:{type:Boolean},error:{type:Boolean},data:{},columns:{},rows:{},editCells:{}},setup(l,{expose:r}){r();const t=l,i={props:t,handleEditCell:u=>{const{data:n,newValue:a,field:o}=u,d=t.editCells.find(_=>_.field==o);d&&n[o]!==a&&d.action(n,a)},get InputText(){return T},get DataTable(){return D},get Column(){return B}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}}),L={key:1,class:"skeleton h-96 w-full"};function M(l,r,t,e,i,u){return s(),c(m,null,[!e.props.pending&&!e.props.error?(s(),f(e.DataTable,{key:0,value:e.props.data??[],paginator:!!t.rows,rows:t.rows,"edit-mode":"cell",onCellEditComplete:e.handleEditCell},{default:g(()=>[(s(!0),c(m,null,V(t.columns,n=>(s(),f(e.Column,{field:n.field,header:n.header,key:n.field},{editor:g(({data:a,field:o})=>[t.editCells.find(d=>d.field===o)?(s(),f(e.InputText,{key:0,modelValue:a[o],"onUpdate:modelValue":d=>a[o]=d,autofocus:"",fluid:""},null,8,["modelValue","onUpdate:modelValue"])):(s(),c(m,{key:1},[k(w(a[o]),1)],64))]),_:2},1032,["field","header"]))),128))]),_:1},8,["value","paginator","rows"])):y("",!0),t.pending?(s(),c("div",L)):y("",!0)],64)}const z=h(G,[["render",M]]),H=b({__name:"AddEtiqueta",props:{user:{}},setup(l,{expose:r}){r();const t=l,e=E({nombre:"",idUsuario:t.user}),{data:i,isError:u,isPending:n,refetch:a}=I("etiquetas","etiquetasData"),o=S=>{e.nombre=S.toUpperCase()},d=v("etiquetas","post",{onSuccess:()=>{e.nombre="",a()}}),_=v("etiquetas","put",{onSuccess:()=>{a()}}),x={props:t,body:e,data:i,isError:u,isPending:n,refetch:a,handleInput:o,send:d,edit:_,Input:O,Table:z};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}});function J(l,r,t,e,i,u){return s(),c(m,null,[p("form",{onSubmit:r[0]||(r[0]=q(n=>e.send.mutate(e.body),["prevent"])),class:"flex justify-center gap-4 items-center"},[C(e.Input,{value:e.body.nombre,onSetValue:e.handleInput,label:"Nombre de la etiqueta"},null,8,["value"]),r[1]||(r[1]=p("button",{type:"submit",class:"btn btn-primary"},"Añadir",-1))],32),C(e.Table,{data:e.data?.response,columns:[{field:"nombre",header:"Nombre"},{field:"createdAt",header:"Fecha de creación"}],pending:e.isPending,error:e.isError,rows:5,"edit-cells":[{field:"nombre",action:(n,a)=>e.edit.mutate({nombre:a.toUpperCase(),idetiqueta:n.idetiqueta})}]},null,8,["data","pending","error","edit-cells"])],64)}const Z=h(H,[["render",J]]);export{Z as default};
