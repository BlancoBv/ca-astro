import{d as v,c as h,a as t,t as r,l as w,m as y,k as i,g as l,F as C,b as m,h as S,i as k,o as x,w as D,j as F}from"./index.CXk2nglT.js";import{F as M}from"./index.BTSUBtd4.js";import{s as N,a as A}from"./index.NsXB0CZk.js";/* empty css                      */import{_ as I}from"./_plugin-vue_export-helper.DlAUqK2U.js";import"./index.CWBm47LU.js";const P=v({__name:"ListaPublicacionesMiembros",props:{data:{},rows:{}},setup(b,{expose:e}){e();const p=b,o=m({}),d=m(!1),f=m({global:{value:null,matchMode:M.CONTAINS}}),s=n=>{const _=new Intl.ListFormat("es",{type:"conjunction",style:"long"}),c=[];if(n.miembros_publicacion.forEach(u=>{c.push(u.nombreCompleto)}),n.otrosAutores){const u=n.otrosAutores.split(";");c.push(...u)}return c.length<1?"---":_.format(c)},a=n=>{o.value=n.data,document.getElementById("modal-articulos").showModal()};S(()=>{d.value=!0}),k(()=>{d.value=!1});const g={props:p,rowData:o,isMounted:d,filters:f,getCollabs:s,handleClick:a,get Column(){return N},get DataTable(){return A}};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),T={id:"modal-articulos",class:"modal modal-bottom sm:modal-middle"},V={class:"modal-box"},B={class:"text-lg font-bold"},j={class:"py-4"},E=["href"],O={class:"flex justify-end mb-4"},U={class:"input input-bordered flex items-center gap-2 w-full max-w-xs"},L={class:"w-20"},z={class:"min-w-32"},R={class:"w-32"};function q(b,e,p,o,d,f){return x(),h(C,null,[t("dialog",T,[t("div",V,[e[3]||(e[3]=t("form",{method:"dialog"},[t("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},[t("i",{class:"bi bi-x"})])],-1)),t("h3",B,r(o.rowData.titulo),1),t("p",j,r(o.rowData.descripcion??"Sin resumen."),1),o.rowData.url?(x(),h("a",{key:0,class:"btn btn-primary",href:o.rowData.url??"#",target:"_blank"},e[2]||(e[2]=[w(" Ver artículo "),t("i",{class:"bi bi-box-arrow-up-right"},null,-1)]),8,E)):y("",!0)]),e[4]||(e[4]=t("form",{method:"dialog",class:"modal-backdrop"},[t("button",null,"close")],-1))]),i(o.DataTable,{value:o.props.data,paginator:!0,rows:o.props.rows??10,rowsPerPageOptions:o.props.rows?void 0:[5,10,20,50],filters:o.filters,"onUpdate:filters":e[1]||(e[1]=s=>o.filters=s),globalFilterFields:["ISSN","titulo","otrosAutores"],loading:o.props.data.length<1?!1:!o.isMounted,onRowClick:o.handleClick,pt:{bodyrow:{class:"hover cursor-pointer"}}},{loading:l(()=>e[5]||(e[5]=[t("div",{class:"absolute top-0 left-0 h-full w-full z-30 select-none skeleton bg-base-300/60 backdrop-blur-[0.5px] rounded-btn"},null,-1)])),header:l(()=>[t("div",O,[t("label",U,[e[6]||(e[6]=t("i",{class:"bi bi-search"},null,-1)),D(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.filters.global.value=s),type:"text",class:"grow",placeholder:"Buscar publicación (ISSN, titulo, autores)"},null,512),[[F,o.filters.global.value]])])])]),empty:l(()=>e[7]||(e[7]=[t("div",{class:"text-center font-bold"},"Sin datos.",-1)])),default:l(()=>[i(o.Column,{field:"ISSN",header:"ISSN"},{body:l(({data:s,field:a})=>[t("div",L,r(s[a]??"---"),1)]),_:1}),i(o.Column,{field:"titulo",header:"Titulo"},{body:l(({data:s,field:a})=>[t("div",z,r(s[a]),1)]),_:1}),i(o.Column,{field:"year",header:"Año",sortable:""}),i(o.Column,{field:"miembros_publicacion",header:"Autores"},{body:l(({data:s})=>[t("div",R,r(o.getCollabs(s)),1)]),_:1}),i(o.Column,{field:"tipo",header:"Tipo",sortable:""},{body:l(({data:s,field:a})=>[w(r(s[a].toUpperCase()),1)]),_:1})]),_:1},8,["value","rows","rowsPerPageOptions","filters","loading"])],64)}const X=I(P,[["render",q]]);export{X as default};
