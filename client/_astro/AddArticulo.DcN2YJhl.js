import{d as B,c as l,o as i,a as o,q as h,t as v,F as _,r as E,b as y,C as P,u as U,m as f,l as V,w as q,g as R,f as N,i as I,D as k}from"./index.BA0kIsUy.js";import{e as F,I as T,E as j}from"./EditorInstance.-FB_BG_o.js";import{a as M,u as G}from"./http.BXiFSbaU.js";import{_ as C}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{S as L}from"./SelectEtiqueta.DFBz7Xvk.js";import"./utils.CgJh8GwY.js";const z=B({__name:"SelectRuta",props:{value:{},required:{type:Boolean}},emits:["setOption"],setup(c,{expose:t,emit:u}){t();const e=c,s=y(e.value),r=u,a=y(!1),m=y({subrutas:[],rutaBase:""}),w=P("input-ruta"),{data:p,isError:x,isPending:g}=M("menus","rutasData"),b=d=>{s.value=d,r("setOption",d)};U(s,(d,O)=>{if(console.log({value:d,oldValue:O}),!x.value&&!g.value){const A=p.value.response?.findIndex(D=>D.ruta===d),S=p.value.response[A];S&&S?.dropcollapse?(a.value=!0,m.value={rutaBase:d,subrutas:S.submenus}):(a.value=!1,m.value={rutaBase:"",subrutas:[]})}});const n={props:e,ruta:s,emit:r,haveRoutes:a,subRoutes:m,inputRuta:w,data:p,isError:x,isPending:g,handleChange:b};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),H=["value"],J={selected:"",disabled:"",value:""},K=["value"],Q=["value"],W=["value"];function X(c,t,u,e,s,r){return i(),l(_,null,[o("select",{class:"select select-bordered w-full max-w-xs",value:e.ruta,onInput:t[0]||(t[0]=a=>e.handleChange(a.target.value)),required:"",ref:"input-ruta"},[o("option",J,v(e.isPending?"Cargando...":"Seleccione una ruta"),1),!e.isPending&&!e.isError?(i(!0),l(_,{key:0},E(e.data.response,a=>(i(),l("option",{value:a.ruta},v(a.nombre),9,K))),256)):h("",!0)],40,H),e.haveRoutes?(i(),l("select",{key:0,class:"select select-bordered w-full max-w-xs",value:e.props.value,onInput:t[1]||(t[1]=a=>e.emit("setOption",a.target.value)),required:""},[t[2]||(t[2]=o("option",{selected:"",disabled:"",value:""},"Seleccione una ruta",-1)),!e.isPending&&!e.isError?(i(!0),l(_,{key:0},E(e.subRoutes.subrutas,a=>(i(),l("option",{value:e.subRoutes.rutaBase+"/"+a.ruta},v(a.nombre),9,W))),256)):h("",!0)],40,Q)):h("",!0)],64)}const Y=C(z,[["render",X]]),Z=B({__name:"AddArticulo",props:{idUsuario:{}},setup(c,{expose:t}){t();const u=c,e=I({titulo:"",ruta:"",idUsuario:u.idUsuario,fecha:"",etiquetas:[]}),s=F(e),r=G("articulos","post"),a=I({src:null}),b={props:u,body:e,editor:s,send:r,image:a,handleEditor:n=>{e.contenido=n},handleRuta:n=>{e.ruta=n},handleEtiquetas:n=>{e.etiquetas=n},handleSubmit:()=>{e:{if(!e.contenido){k.warning("No has escrito nada en el editor.");break e}if(e.etiquetas.length<1){k.error("AÃ±ade al menos una etiqueta.");break e}r.mutate(e)}},handleImg:n=>{a.src=n},Editor:j,SelectRuta:Y,SelectEtiqueta:L,ImageSelector:T};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}}),$={class:"form-control w-full max-w-xs"},ee={class:"form-control w-full max-w-xs"};function te(c,t,u,e,s,r){return i(),l(_,null,[f(e.ImageSelector,{onClick:e.handleImg,"editor-instance":e.editor},null,8,["editor-instance"]),o("form",{onSubmit:N(e.handleSubmit,["prevent"])},[o("label",$,[t[3]||(t[3]=o("div",{class:"label"},[o("span",{class:"label-text"},"Titulo del articulo")],-1)),q(o("input",{type:"text",class:"input input-bordered w-full max-w-xs",required:"","onUpdate:modelValue":t[0]||(t[0]=a=>e.body.titulo=a)},null,512),[[R,e.body.titulo]])]),o("label",ee,[t[4]||(t[4]=o("div",{class:"label"},[o("span",{class:"label-text"},"Fecha")],-1)),q(o("input",{type:"date",class:"input input-bordered w-full max-w-xs",required:"","onUpdate:modelValue":t[1]||(t[1]=a=>e.body.fecha=a)},null,512),[[R,e.body.fecha]])]),V(" "+v(e.body.ruta)+" ",1),f(e.SelectRuta,{value:e.body.ruta,onSetOption:e.handleRuta},null,8,["value"]),f(e.SelectEtiqueta,{value:e.body.etiquetas,onSetOption:e.handleEtiquetas},null,8,["value"]),f(e.Editor,{onUpdateContent:e.handleEditor,onAddImage:t[2]||(t[2]=()=>{}),editor:e.editor},null,8,["editor"]),t[5]||(t[5]=o("button",{class:"btn btn-primary",type:"submit"},"Enviar",-1))],32)],64)}const ie=C(Z,[["render",te]]);export{ie as default};
