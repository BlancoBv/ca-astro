import{d as x,o as l,c,k as f,l as b,F as m,r as w,m as S,t as V,p as y,a as g,s as C,f as q,i as E}from"./index.BVGSAqHi.js";import{I as T}from"./Input.B5Rq66hX.js";import{a as I,u as h}from"./http.kayl167E.js";import{d as B,a as D,s as N}from"./index.Ma997Kmy.js";import{_ as k}from"./_plugin-vue_export-helper.DlAUqK2U.js";import"./utils.eexey1_X.js";import"./index.Dh0zx59m.js";const F=x({__name:"Table",props:{pending:{type:Boolean},error:{type:Boolean},data:{},columns:{},rows:{},editCells:{}},setup(d,{expose:n}){n();const t=d,i={props:t,handleEditCell:u=>{const{data:a,newValue:r,field:o}=u,s=t.editCells.find(p=>p.field==o);s&&a[o]!==r&&s.action(a,r)},get InputText(){return B},get DataTable(){return D},get Column(){return N}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}}),U={key:1,class:"skeleton h-96 w-full"};function A(d,n,t,e,i,u){return l(),c(m,null,[!e.props.pending&&!e.props.error?(l(),f(e.DataTable,{key:0,value:e.props.data??[],paginator:!!t.rows,rows:t.rows,"edit-mode":"cell",onCellEditComplete:e.handleEditCell},{default:b(()=>[(l(!0),c(m,null,w(t.columns,a=>(l(),f(e.Column,{field:a.field,header:a.header,key:a.field},{editor:b(({data:r,field:o})=>[t.editCells.find(s=>s.field===o)?(l(),f(e.InputText,{key:0,modelValue:r[o],"onUpdate:modelValue":s=>r[o]=s,autofocus:"",fluid:""},null,8,["modelValue","onUpdate:modelValue"])):(l(),c(m,{key:1},[S(V(r[o]),1)],64))]),_:2},1032,["field","header"]))),128))]),_:1},8,["value","paginator","rows"])):y("",!0),t.pending?(l(),c("div",U)):y("",!0)],64)}const P=k(F,[["render",A]]),j=x({__name:"AddEtiqueta",props:{user:{}},setup(d,{expose:n}){n();const t=d,e=E({nombre:"",idUsuario:t.user}),{data:i,isError:u,isPending:a,refetch:r}=I("etiquetas","etiquetasData"),o=v=>{e.nombre=v.toUpperCase()},s=h("etiquetas","post",{onSuccess:()=>{e.nombre="",r()}}),p=h("etiquetas","put",{onSuccess:()=>{r()}}),_={props:t,body:e,data:i,isError:u,isPending:a,refetch:r,handleInput:o,send:s,edit:p,Input:T,Table:P};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}});function O(d,n,t,e,i,u){return l(),c(m,null,[g("form",{onSubmit:n[0]||(n[0]=q(a=>e.send.mutate(e.body),["prevent"])),class:"flex justify-center gap-4 items-center"},[C(e.Input,{value:e.body.nombre,onSetValue:e.handleInput,label:"Nombre de la etiqueta"},null,8,["value"]),n[1]||(n[1]=g("button",{type:"submit",class:"btn btn-primary"},"Añadir",-1))],32),C(e.Table,{data:e.data?.response,columns:[{field:"nombre",header:"Nombre"},{field:"createdAt",header:"Fecha de creación"}],pending:e.isPending,error:e.isError,rows:5,"edit-cells":[{field:"nombre",action:(a,r)=>e.edit.mutate({nombre:r.toUpperCase(),idetiqueta:a.idetiqueta})}]},null,8,["data","pending","error","edit-cells"])],64)}const Q=k(j,[["render",O]]);export{Q as default};
